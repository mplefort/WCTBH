(window.webpackJsonp=window.webpackJsonp||[]).push([["tip_widget_v2"],{"./core/frontend/webpack/async_scripts/loaders/tip_widget_v2.js":function(e,t,n){"use strict";n("./node_modules/groupon-iframe-login/frontend/iframe_login_no_template.coffee");var i=n("./node_modules/@grpn/tip-widget/frontend/desktop/index.js");e.exports={init:function(e){var t=e.tipWidgetV2;if(t){if(e.iframeLogin){e.iframeLogin.lazyLoad=!1,window.IframeLogin.init(e,function(){return window.IframeLogin.lazyLoadIframe(!0)})}i(t)}}}},"./node_modules/@grpn/tip-widget/frontend/desktop/index.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("./node_modules/@grpn/tip-widget/lib/actions/frontend/fetch_reviews.js"),o=n("./node_modules/@grpn/tip-widget/lib/actions/frontend/fetch_user_profile_reviews.js"),s=n("./node_modules/@grpn/tip-widget/frontend/tip_event_pipe.js"),a=n("./node_modules/@grpn/tip-widget/frontend/initialize_modal.js"),l=n("./node_modules/@grpn/tip-widget/frontend/desktop/initialize_inline_reviews.js"),p=function(){return n.e("tip_widget_v2_modal").then(n.t.bind(null,"./node_modules/@grpn/tip-widget/lib/components/all_reviews_modal/modal_body.js",7))},u=function(){return n.e("tip_widget_v2_user_profile_modal").then(n.t.bind(null,"./node_modules/@grpn/tip-widget/lib/components/user_public_profile/modal_body.js",7))};e.exports=function(e){var t=s(),n=a({importModalJS:u,fetchModalData:o,urlData:e,modalId:"user-public-profile-modal",eventName:"fetch_user_profile_reviews",errorMessage:e.userProfileErrorText,TipEventPipe:t}),c=i({},e,{TipEventPipe:t,initializeUserProfileModal:n});if(e.hasModal){var d=a({importModalJS:p,fetchModalData:r,urlData:e,modalId:"all-tips-modal",eventName:"fetch_reviews",errorMessage:e.reviewsErrorText,TipEventPipe:t,renderData:{initializeUserProfileModal:n}});Object.assign(c,{initializeTipsModal:d})}l(c)}},"./node_modules/@grpn/tip-widget/frontend/desktop/initialize_inline_reviews.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js"),r=i.h,o=i.render,s=n("./node_modules/@grpn/tip-widget/lib/components/inline_reviews/desktop_inline_tips_container.js");e.exports=function(e){var t=document.querySelector("#tips"),n=t.querySelector(".inline-tips-container");n&&o(r(s,e),t,n)}},"./node_modules/@grpn/tip-widget/frontend/initialize_modal.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n("./node_modules/phy/lib/phy.js"),s=o.h,a=o.render;e.exports=function(e){var t=e.importModalJS,n=e.isTouch,o=e.fetchModalData,l=e.urlData,p=e.modalId,u=e.eventName,c=e.errorMessage,d=e.TipEventPipe,f=e.renderData,g=!1;return function(e){return g?d.trigger(u,e):(g=!0,n?(document.querySelector("#all-tips-pane").style.display="block",document.querySelector("#global-container").style.display="none",scrollTo(0,1),scrollTo(0,0)):window.GIG.Modal.open({id:p}),Promise.all([t(),o(l,e)]).then(function(t){var n=r(t,2),o=n[0],u=n[1],c=document.querySelector("#"+p),g=c.querySelector(".modal-body");return a(s(o.default,i({},l,e,u,f,{TipEventPipe:d})),c,g)}).catch(function(){g=!1;var e=document.querySelector("#"+p+" .gig-spinner");e&&(e.outerHTML='<div class="error-message">'+c+"</div>")}))}}},"./node_modules/@grpn/tip-widget/frontend/tip_event_pipe.js":function(e,t){e.exports=function(){var e={};return{on:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},trigger:function(t,n){e[t]&&e[t].forEach(function(e){return e(n)})}}}},"./node_modules/@grpn/tip-widget/lib/actions/frontend/endorse_review.js":function(e,t){e.exports=function(e,t,n){var i="/deals/tip_widget/v2/endorse/"+(n?"unlike":"like")+"/"+e;return window.fetch(i,{body:JSON.stringify({_csrf:t}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){if(200===e.status)return e.json();throw new Error("couldnt endorse tip")}).then(function(e){return e.data})}},"./node_modules/@grpn/tip-widget/lib/actions/frontend/fetch_reviews.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("./node_modules/@grpn/tip-widget/lib/utils/make_query_param_string.js");e.exports=function(e,t){var n=e.reviewsErrorText,o=e.fetchReviewsUrl,s=o.base,a=o.baseParams,l=s+"?"+r(i({},a,t));return window.fetch(l,{credentials:"include"}).then(function(e){if(200===e.status)return e.json();throw new Error("couldnt load reviews")}).then(function(e){return e.data}).catch(function(){throw new Error(n)})}},"./node_modules/@grpn/tip-widget/lib/actions/frontend/fetch_user_profile_reviews.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("./node_modules/@grpn/tip-widget/lib/utils/make_query_param_string.js");e.exports=function(e,t){var n=e.userProfileErrorText,o=e.fetchUserProfileReviewsUrl,s=o.base,a=o.baseParams,l=s+"/"+t.profileId+"/reviews?"+r(i({},a,t,{profileId:null}));return window.fetch(l).then(function(e){if(200===e.status)return e.json();throw new Error("couldnt load user profile reviews")}).then(function(e){return e.data}).catch(function(){throw new Error(n)})}},"./node_modules/@grpn/tip-widget/lib/components/aspects/index.js":function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=n("./node_modules/phy/lib/phy.js"),o=r.Component,s=r.h,a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showSeeMoreButton:!1,showAllAspects:!1},n.expandAllAspects=n.expandAllAspects.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"componentDidMount",value:function(){var e=document.querySelectorAll(".aspect-list .aspect"),t=e.length>1&&e[0].offsetTop!==e[e.length-1].offsetTop;this.setState({showSeeMoreButton:t})}},{key:"expandAllAspects",value:function(){this.setState({showAllAspects:!0,showSeeMoreButton:!1})}},{key:"render",value:function(){var e=this.props,t=e.aspects,n=e.aspectFilter,i=e.changeAspectFilter,r=e.seeMoreText;if(!t)return null;var o=this.state,a=o.showAllAspects,l=o.showSeeMoreButton;return s(".row.aspect-list",s(".aspects"+(a?"":".aspect-list-collapsed"),t.map(function(e){return n&&n===e.text?s(".aspect.active",{onClick:function(){return i(!1)}},e.text):s(".aspect",{onClick:function(){return i(e)}},e.text)})),l?s(".see-more-aspect-link",{onClick:this.expandAllAspects},r):null)}}]),t}();e.exports=a},"./node_modules/@grpn/tip-widget/lib/components/helpful_button/index.js":function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./node_modules/phy/lib/phy.js"),s=o.Component,a=o.h,l=n("./node_modules/@grpn/tip-widget/lib/actions/frontend/endorse_review.js"),p=function(){return a("svg",{viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},a("path",{"fill-rule":"evenodd",d:"M2 12H0V5h2v7zm10-4.8c0 .526-.455.96-1.029.96h-.089c.377.154.669.516.666.94-.004.407-.32.776-.577.942v.002c0 .006-.226.122-.826.127a.944.944 0 0 1 .583.869c0 .526-.47.96-1.042.96H3V5.28l1.8-2.64V.96C4.8.435 5.256 0 5.829 0c.928 0 1.216.793 1.216 2.117 0 1.062-.188 2.202-.188 2.203h4.114c.574 0 1.029.434 1.029.96s-.455.96-1.029.96c.574 0 1.029.434 1.029.96z"}))},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.review,r=i.isLiked,o=void 0!==r&&r,s=i.likeCount;return n.state={giveThanks:!1,isLiked:o,likeCount:s},n.sendEndorsement=n.sendEndorsement.bind(n),n.userLogin=n.userLogin.bind(n),n.handleEndorseError=n.handleEndorseError.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),i(t,[{key:"reattachIframeLogin",value:function(){!this.props.isLoggedIn&&window.IframeLogin&&window.IframeLogin.reloadBindings(this.base)}},{key:"componentWillReceiveProps",value:function(e){var t=e.review,n=t.isLiked,i=t.likeCount;n!==this.state.isLiked&&this.setState({isLiked:n,likeCount:i})}},{key:"componentDidMount",value:function(){this.reattachIframeLogin()}},{key:"componentDidUpdate",value:function(){var e=this;this.reattachIframeLogin(),this.state.giveThanks&&setTimeout(function(){return e.setState({giveThanks:!1})},3e3)}},{key:"handleEndorseError",value:function(){!this.props.isLoggedIn&&window.IframeLogin&&window.IframeLogin.openModal()}},{key:"userLogin",value:function(e){var t=window.location,n=t.protocol+"//"+t.host+t.pathname+t.search;if(window.IframeLogin&&window.IframeLogin.openModal)e.stopImmediatePropagation(),window.IframeLogin.openModal(n);else{var i=encodeURIComponent(n);window.location.assign("/login?return_to="+i)}}},{key:"sendEndorsement",value:function(){var e=this,t=this.props,n=t.csrf,i=t.review.id,r=this.state.isLiked;l(i,n,r).then(function(t){var n=t.action,r=t.likeCount,o="like"===n;e.setState({giveThanks:o,isLiked:o,likeCount:r}),e.props.TipEventPipe.trigger("review_endorsement",{isNowLiked:o,reviewId:i,likeCount:r})}).catch(this.handleEndorseError)}},{key:"render",value:function(e,t){var n,i=e.helpfulButtonText,o=e.hideLikesCount,s=e.isLoggedIn,l=e.review.rating,u=e.thanksText,c=t.giveThanks,d=t.isLiked,f=t.likeCount,g={};s?Object.assign(g,{"data-bhw":"UGC-Helpful","data-bhd":JSON.stringify({review_rating:l}),onClick:this.sendEndorsement}):Object.assign(g,(r(n={},"data-login-required",!0),r(n,"onClick",this.userLogin),n));return a(".tip-endorsement",a("a"+(d?".unlike":".like"),g,a(p),i,f&&!o?" "+f:""),c?" "+u:null)}}]),t}();e.exports=u},"./node_modules/@grpn/tip-widget/lib/components/inline_reviews/aspects_tips_container.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=n("./node_modules/phy/lib/phy.js"),s=o.Component,a=o.h,l=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/inline.js"),p=n("./node_modules/@grpn/tip-widget/lib/components/verified_badge/index.js"),u=n("./node_modules/@grpn/tip-widget/lib/components/sort_options/index.js"),c=n("./node_modules/@grpn/tip-widget/lib/components/aspects/index.js"),d=n("./node_modules/@grpn/tip-widget/lib/components/single_review/index.js"),f=n("./node_modules/@grpn/tip-widget/lib/actions/frontend/fetch_reviews.js"),g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.reviews,r=e.reviewsTitle,o=e.seeAllReviewsText,s=e.sortOptions,a=e.useReviewsFromDeal;return n.initOrderBy=s&&s[0]&&s[0].value,n.state={aspectFilter:null,errorMessage:null,fetchingReviews:!a,orderBy:n.initOrderBy,reviews:i,reviewsTitle:r,starFilter:null,seeAllReviewsText:o},n.fetchAndRender=n.fetchAndRender.bind(n),n.initializeTipsModal=n.initializeTipsModal.bind(n),n.onStarRatingsClick=n.onStarRatingsClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),r(t,[{key:"updateReviewProps",value:function(e,t,n){return e.id===t?i({},e,n):e}},{key:"componentDidMount",value:function(){var e=this;this.props.useReviewsFromDeal||this.fetchAndRender({useSummaryEndpoint:!0});var t=document.querySelector("#tip-sort-dropdown-input-inline");t&&t.addEventListener("change",function(t){var n=t.target.value;e.fetchAndRender({orderBy:n})}),this.props.inlineSortOptions&&this.props.TipEventPipe.on("sort_update",function(n){var i=n.orderBy,r=n.reviews;e.setState({orderBy:i,reviews:r.slice(0,e.props.inlineReviewCount)}),t&&(t.value=i)}),this.props.TipEventPipe.on("review_endorsement",function(t){var n=t.isNowLiked,i=t.reviewId,r=t.likeCount,o=e.state.reviews.map(function(t){return e.updateReviewProps(t,i,{isLiked:n,likeCount:r})});e.setState({reviews:o})})}},{key:"fetchAndRender",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.aspectFilter,r=void 0===n?null:n,o=t.orderBy,s=void 0===o?this.state.orderBy:o,a=t.starFilter,l=void 0===a?null:a,p=t.useSummaryEndpoint,u=void 0===p?null:p;return this.setState({fetchingReviews:!0}),f(this.props,{aspectFilter:r,starFilter:l,limit:this.props.inlineReviewCount,offset:0,orderBy:s,useSummaryEndpoint:u}).then(function(t){e.setState(i({},t,{aspectFilter:r,errorMessage:null,fetchingReviews:!1,orderBy:s,starFilter:l})),!l&&e.props.touchLowerSeeAllReviewsLink&&e.setState({seeAllReviewsText:e.props.seeAllReviewsText}),(document.querySelector("#tip-sort-dropdown-input-inline")||{}).value=s}).catch(function(t){var n=s!==e.state.orderBy;n&&((document.querySelector("#tip-sort-dropdown-input-inline")||{}).value=e.state.orderBy);var i=e.state.aspectFilter&&!r||e.state.starFilter&&!l;e.setState({errorMessage:e.props.inlineSortOptions&&(r||l||n||i)?null:t.message,fetchingReviews:!1})})}},{key:"initializeTipsModal",value:function(){return this.props.initializeTipsModal({aspectFilter:this.state.aspectFilter,orderBy:this.state.orderBy,starFilter:this.state.starFilter})}},{key:"onStarRatingsClick",value:function(e){var t=e.filterName;return this.fetchAndRender({orderBy:this.initOrderBy,starFilter:t})}},{key:"renderAllTipsLink",value:function(){var e=this.props,t=e.isTouchRequest,n=e.starRatingsProps.formattedRating;return a("a.all-tips-link",{"data-bhw":"UGC-SeeAllReviews","data-bhd":JSON.stringify({overall_rating:n}),"data-modal-id":t?null:"all-tips-modal",onClick:this.initializeTipsModal},this.state.seeAllReviewsText)}},{key:"render",value:function(e,t){var n=this,r=t.aspectFilter,o=t.errorMessage,s=t.fetchingReviews,f=t.reviews,g=t.reviewsTitle,h=t.starFilter,v=e.aspects,w=e.clearFilterText,m=e.hasModal,b=e.inlineSortOptions,y=e.isTouchRequest,_=e.noReviewsText,j=e.seeMoreText,x=e.starRatingsProps,k=e.touchLowerSeeAllReviewsLink,T={aspects:v,aspectFilter:r,changeAspectFilter:function(e){return n.fetchAndRender({aspectFilter:e.text,orderBy:n.initOrderBy})},seeMoreText:j},O=[];return x.inlineHistogram&&O.push(a(l,i({},x,{onClick:this.onStarRatingsClick}))),O.push(a(p,e)),v&&O.push(a(c,T)),b&&y&&O.push(a(u,i({},this.props,{isInline:!0}))),(b?(r||h)&&g:!y)&&O.push(a(".tips-subtitle.relevant-reviews-title",g)),(r||h)&&O.push(a(".clear-aspect-filter",{onClick:function(){return n.fetchAndRender()}},w)),o?O.push(a(".error-message",o)):f&&f.length?(O.push(a(".tip-item-container",f.map(function(t){return a(d,i({},e,{isInlineReview:!0,review:t}))}))),m&&(y&&k?O.push(a(".lower-tips-link",this.renderAllTipsLink())):y||O.push(this.renderAllTipsLink()))):s?O.push(a(".gig-spinner")):O.push(a(".no-reviews-message",_)),a.apply(void 0,[".aspect-tips-container"].concat(O))}}]),t}();e.exports=g},"./node_modules/@grpn/tip-widget/lib/components/inline_reviews/desktop_inline_tips_container.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("./node_modules/phy/lib/phy.js"),o=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/index.js"),s=n("./node_modules/@grpn/tip-widget/lib/components/sort_options/index.js"),a=n("./node_modules/@grpn/tip-widget/lib/components/inline_reviews/aspects_tips_container.js");e.exports=function(e){var t=e.hasReviews,n=e.inlineSortOptions,l=e.noReviewsText,p=e.starRatingsProps,u=[];return n||p.inlineHistogram?u.push(r("div.ugc-rating-summary-and-dropdown",r(o,i({},p,{linkToTips:!1})),n&&r(s,i({},e,{isInline:!0})))):u.push(r(o,i({},p,{linkToTips:!1}))),t?u.push(r(a,e)):u.push(r(".no-reviews-message",l)),r.apply(void 0,[".inline-tips-container"].concat(u))}},"./node_modules/@grpn/tip-widget/lib/components/merchant_replies/index.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=n("./node_modules/phy/lib/phy.js"),s=o.Component,a=o.h,l=function(e){return a(".merchant-response",a(".merchant-name",e)," replied")},p=function(e){var t=e.merchantName,n=e.toggleReply,i=e.viewCommentText;return a(".merchant-reply.merchant-reply-preview",{onClick:n},a(l,t),a(".view-comment",i+" +"))},u=function(e){var t=e.merchantReply,n=t.replyDate,i=t.text,r=e.merchantName,o=e.toggleReply;return a(".merchant-reply.merchant-reply-expanded",{onClick:o},a(".reply-text",i),a(".replied-at",a(l,r)," · "+n))},c=function(e){var t=e.isCollapsed,n=e.merchantReply,i=n.replyDate,r=n.text,o=e.merchantName,s=e.toggleReply;return a(".merchant-reply.merchant-reply-text-preview",{onClick:s},a(".replied-at",a(l,o)," · "+i),a(".reply-text"+(t?".ugc-ellipsis.fade-text":""),r))},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isCollapsed:!0,collapsible:!0},n.toggleReply=n.toggleReply.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),r(t,[{key:"toggleReply",value:function(){this.setState({isCollapsed:!this.state.isCollapsed})}},{key:"componentDidMount",value:function(){if(this.props.isTouchRequest&&this.props.merchantReply){var e=this.base.querySelector(".ugc-ellipsis");e.scrollHeight<=e.offsetHeight&&this.setState({isCollapsed:!1,collapsible:!1})}}},{key:"render",value:function(e,t){var n=t.isCollapsed,r=t.collapsible;if(!e.merchantReply)return null;var o=e.isTouchRequest?c:n?p:u;return a(o,i({},e,{isCollapsed:n,toggleReply:r&&this.toggleReply}))}}]),t}();e.exports=d},"./node_modules/@grpn/tip-widget/lib/components/review_badges/badges.js":function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=n("./node_modules/phy/lib/phy.js"),o=r.Component,s=r.h,a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"reInitializeTooltip",value:function(){this.props.tooltip&&window.GIG&&window.GIG.Tooltip&&window.GIG.Tooltip.init(this.base)}},{key:"componentDidMount",value:function(){this.reInitializeTooltip()}},{key:"componentDidUpdate",value:function(){this.reInitializeTooltip()}},{key:"render",value:function(e){var t=e.badgeText,n=e.tooltip;return s("span.badge.reviewer-badge"+(n?".tooltip-trigger":""),{tabindex:-1,"data-tooltip-id":n?n+"-tooltip":null,"data-tippy-config":n?'{"zIndex":2100, "interactive":false}':null},t)}}]),t}();e.exports=function(e){var t=e.badges;return t&&t.length?s("span.reviewer-badges.with-dot-separator",t.map(function(e){return s(a,e)})):null}},"./node_modules/@grpn/tip-widget/lib/components/single_review/index.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("./node_modules/phy/lib/phy.js"),o=n("./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_mini_profile.js"),s=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/star_icons.js"),a=n("./node_modules/@grpn/tip-widget/lib/components/single_review/review_text.js"),l=n("./node_modules/@grpn/tip-widget/lib/components/ugc_photos/index.js"),p=n("./node_modules/@grpn/tip-widget/lib/components/merchant_replies/index.js"),u=n("./node_modules/@grpn/tip-widget/lib/components/helpful_button/index.js"),c=function(e){var t=e.redeemedAt;return t?r(".redeemed-at",t):null};e.exports=function(e){var t=e.imagesText,n=e.initializeUserProfileModal,d=e.isTouchRequest,f=e.isReviewsModalReview,g=e.isUserProfileReview,h=e.merchantName,v=e.ratingsText,w=e.review,m=e.reviewsText,b=e.showHelpfulButton,y=e.showUserPublicProfile,_=e.viewCommentText,j=void 0;if(y&&n&&!g){var x=w.user.profileId;j=function(){return n({profileId:x,showAllReviewsBtn:!!f})}}var k=!g;return r(".tip-item",{"data-bhc":"review:"+w.id},r(o,i({},w.user,{imagesText:t,openUserProfileModalOnClick:j,ratingsText:v,reviewsText:m,showUserStats:k,rating:w.rating})),r(".ratings-date",r(s,w),r("span.reviewer-reviewed-date.with-dot-separator",w.createdDate)),r(a,w),r(c,w),r(l,i({},w,{isReviewsModalReview:f})),b&&!g?r(u,e):null,r(p,i({isTouchRequest:d,merchantName:h,viewCommentText:_},w)))}},"./node_modules/@grpn/tip-widget/lib/components/single_review/review_text.js":function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=n("./node_modules/phy/lib/phy.js"),o=r.Component,s=r.h,a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.expandReviewText=n.expandReviewText.bind(n),n.state={isCollapsed:n.props.collapseText,truncateText:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"componentDidMount",value:function(){this.base.scrollHeight<=this.base.offsetHeight?this.setState({isCollapsed:!1}):this.setState({truncateText:!0})}},{key:"expandReviewText",value:function(){this.setState({isCollapsed:!1,truncateText:!1})}},{key:"render",value:function(e,t){var n=e.reviewText,i=t.isCollapsed,r=t.truncateText,o=r&&n?n.slice(0,360)+"...":n,a=".tip-text";return i&&(a+=".ugc-ellipsis"),r&&(a+=".fade-text"),s(a,{dangerouslySetInnerHTML:{__html:o},onClick:i?this.expandReviewText:null})}}]),t}();e.exports=a},"./node_modules/@grpn/tip-widget/lib/components/sort_options/index.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.isInline,n=e.orderBy,r=e.sortByText,o=e.sortOptions,s="tip-sort-dropdown-input"+(t?"-inline":"");return i(".gig-field-dropdown.sort-tips",i("label",{for:s},r),i("select#"+s,o.map(function(e){var t=e.description,r=e.value;return i("option",{selected:n===r||null,value:r},t)})))}},"./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/chart.js":function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var r=n("./node_modules/phy/lib/phy.js"),o=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/star_icons.js"),s=function(e){var t=e.onClick,n=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["onClick"]),i=n.filterName,s=n.percentage,a=n.rating,l=n.starIcons,p={"data-bhc":"UGC-Histogram-Row:"+n.rating+"-Star"};t&&s>0&&(p.onClick=function(){return t(n)});var u={};return i&&(u["data-bhw"]="UGC-Sort-StarRating",u["data-bhd"]=JSON.stringify({star_rating:a})),r(".chart-row",p,r(".chart-item",u,r("div.chart-stars",r(o,{starIcons:l})),r(".chart-container",r(".chart-scale",r(".chart-fill",{style:"width: "+s+"%"}))),r(".chart-values",s?s+"%":"")))};e.exports=function(e){var t=e.onClick,n=e.ratingHistogram;return r(".chart-table",n.map(function(e){return r(s,i({},e,{onClick:t}))}))}},"./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/index.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js"),r=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/chart.js");e.exports=function(e){var t=e.averageRatingsText,n=e.ratingHistogram,o=e.formattedRating;return i("#ugc-ratings-histogram.tooltip.rating-histogram",{"aria-hidden":!0,role:"tooltip"},i(".chart-content",i(".overall-rating",i("span",o)),i(".average-rating-text",i("span",t)),i(r,{ratingHistogram:n})))}},"./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/inline.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js"),r=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/chart.js");e.exports=function(e){return e.ratingHistogram?i("#ugc-ratings-histogram.inline-histogram",i(r,e)):null}},"./node_modules/@grpn/tip-widget/lib/components/star_ratings/index.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js"),r=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/star_icons.js"),o=n("./node_modules/@grpn/tip-widget/lib/components/star_ratings/histogram/index.js");e.exports=function(e){var t=e.inlineHistogram,n=e.linkToTips,s=void 0===n||n,a=e.ratingHistogram&&!t,l={};return s&&(l.href="#tips"),a&&Object.assign(l,{class:"tooltip-trigger","data-tooltip-id":"ugc-ratings-histogram","data-tippy-config":'{"zIndex":300, "interactive":false, "maxWidth": "35rem" }',"data-position":"right",tabindex:-1}),i(".ugc-star-ratings-container.numerical-ratings",{},i("a",l,i("span.numerical-rating",e.formattedRating),i("span.star-ratings-wrapper",i(r,e),i("span.star-rating-text",e.totalRatingsText)),a?i(o,e):null))}},"./node_modules/@grpn/tip-widget/lib/components/star_ratings/star_icons.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.starIcons;return i("ul.rating.ugc-star-rating",t.map(function(e){return i("li","empty-star"===e?null:i("span."+e))}))}},"./node_modules/@grpn/tip-widget/lib/components/ugc_photos/index.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.isReviewsModalReview,n=e.rating,r=e.ugcPhotos;if(!r||!r.length)return null;var o=r.length>(t?6:5);return i("ul.ugc-photos"+(o?".with-scroll":""),r.map(function(t){var r=t.id,o=t.url;return i("li.ugc-photo",i("img",{"data-bhd":JSON.stringify({review_rating:n}),"data-bhw":"UGC-CustomerPhoto",onClick:function(){return function(e,t){return window.DealEventPipe?window.DealEventPipe.trigger("openUGCPhotosModal",{filterIds:e.ugcPhotos.map(function(e){return e.id}),currentImageId:t,photoData:e.ugcPhotos,reviewData:e}):null}(e,r)},src:o+"/v1/c120x120"}))}))}},"./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_icon.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.initials;return i(".user-icon-container",i(".tip-user-icon.circle",t))}},"./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_mini_profile.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js"),r=n("./node_modules/@grpn/tip-widget/lib/components/review_badges/badges.js"),o=n("./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_icon.js"),s=n("./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_stats.js");e.exports=function(e){var t=e.maskedName,n=e.openUserProfileModalOnClick,a=e.showUserStats,l=e.stats,p=e.wroteReviewForText,u={};return n&&Object.assign(u,{"data-modal-id":"user-public-profile-modal",onClick:n}),i(".review-user-mini-profile",i(o,e),i(".user-text-container",i("span.tips-reviewer-name",u,p||t),i(r,l),a?i(s,e):null))}},"./node_modules/@grpn/tip-widget/lib/components/user_public_profile/user_stats.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.stats,n=e.ratingsText,r=e.reviewsText,o=e.imagesText;return t?i(".user-stats",t.ratingCount?i("span.reviewer-review-count",i("svg.rating-count-icon",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},i("path",{fill:"#A5A8AB","fill-rule":"nonzero",d:"M3.076 11.774c-.692.465-1.09.19-.886-.618l.895-3.562-2.7-2.31c-.631-.54-.47-1.017.364-1.067L4.2 4.01 5.473.585c.29-.78.761-.78 1.052 0L7.802 4.01l3.449.207c.832.05.997.527.364 1.068l-2.7 2.31.895 3.561c.202.806-.192 1.084-.887.618L6 9.809l-2.924 1.965z"})),t.ratingCount+" "+n):null,t.reviewCount?i("span.reviewer-review-count",i("svg.review-count-icon",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10"},i("path",{fill:"#A5A8AB","fill-rule":"evenodd",d:"M5 8l-2 2V7.874A4.002 4.002 0 0 1 4 0h4a4 4 0 1 1 0 8H5z"})),t.reviewCount+" "+r):null,t.imageCount?i("span.reviewer-review-count",i("svg.image-count-icon",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10"},i("path",{fill:"#A5A8AB","fill-rule":"evenodd",d:"M11.344 1.6c.414 0 .656.258.656.7v6.8c0 .442-.242.9-.656.9H.844C.43 10 0 9.542 0 9.1V2.3c0-.442.43-.7.844-.7h1.94L4.063.234A.727.727 0 0 1 4.594 0h3c.199 0 .39.084.53.234L9.404 1.6h1.94zM6 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})),t.imageCount+" "+o):null):null}},"./node_modules/@grpn/tip-widget/lib/components/verified_badge/index.js":function(e,t,n){var i=n("./node_modules/phy/lib/phy.js");e.exports=function(e){var t=e.learnMoreText,n=e.showVerified,r=e.showVerifiedLearnMore,o=e.verifiedBadgeContentText,s=e.verifiedBadgeHeaderText;return n?i(".verified-template",i("svg.verified-badge-svg",{viewBox:"0 0 45 43",xmlns:"http://www.w3.org/2000/svg"},i("g",{fill:"none","fill-rule":"evenodd"},[i("path.badge",{d:"M45 21.25c0 2.257-2.895 4.035-3.565 6.072-.694 2.11.564 5.224-.731 6.98-1.31 1.776-4.707 1.55-6.505 2.841-1.78 1.279-2.606 4.545-4.744 5.23-2.064.661-4.668-1.48-6.955-1.48s-4.89 2.141-6.955 1.48c-2.138-.685-2.964-3.951-4.744-5.23-1.798-1.291-5.196-1.065-6.505-2.84-1.295-1.757-.037-4.87-.731-6.98C2.895 25.284 0 23.506 0 21.25c0-2.257 2.895-4.035 3.565-6.072.694-2.11-.564-5.224.731-6.98 1.31-1.776 4.707-1.55 6.505-2.841 1.78-1.279 2.606-4.545 4.744-5.23 2.064-.661 4.668 1.48 6.955 1.48s4.89-2.141 6.955-1.48c2.138.685 2.964 3.951 4.744 5.23 1.798 1.291 5.196 1.065 6.505 2.84 1.295 1.757.037 4.87.731 6.98.67 2.038 3.565 3.816 3.565 6.073"}),i("path.checkmark",{d:"M18.346 30.29a1.417 1.417 0 0 1-1.08-.412l-4.848-5.575a1.432 1.432 0 0 1 0-2.022 1.424 1.424 0 0 1 2.017 0l3.976 4.571L30.816 14.42a1.424 1.424 0 0 1 2.016 0 1.433 1.433 0 0 1 0 2.022L19.426 29.878a1.413 1.413 0 0 1-1.08.412z"})])),i(".verified-badge-content",i(".verified-reviews",s),i("span",o),r?i("a.verified-learn-more",{href:"/pages/usercontent"},t):null)):null}},"./node_modules/@grpn/tip-widget/lib/utils/make_query_param_string.js":function(e,t){e.exports=function(e){return Object.keys(e).filter(function(t){return![null,void 0,""].includes(e[t])}).map(function(t){return t+"="+e[t]}).join("&")}}}]);
//# sourceMappingURL=tip_widget_v2-327aa3262a.js.map